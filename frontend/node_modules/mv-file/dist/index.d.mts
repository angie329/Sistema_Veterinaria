import { EventEmitter } from 'events';

interface PathMapping {
    [key: string]: string;
}
interface MoveOptions {
    /**
     * current working directory
     *
     * 当前工作目录
     * @default process.cwd()
     */
    cwd?: string;
    /**
     * source base directory
     *
     * 源基础目录
     */
    base?: string;
    /**
     * target base directory
     *
     * 目标基础目录
     */
    dest?: string;
    /**
     * whether to force overwrite
     *
     * 是否强制覆盖
     * @default false
     */
    force?: boolean;
    /**
     * whether to clean empty directories
     *
     * 是否清理空目录
     * @default false
     */
    clean?: boolean;
    /**
     * whether to print verbose logs
     *
     * 是否启用详细日志
     * @default false
     */
    verbose?: boolean;
    /**
     * concurrency count
     *
     * 并发最大数
     * @default 4
     */
    concurrency?: number;
}

declare class FileMoverError extends Error {
    readonly code: string;
    readonly source?: string | undefined;
    readonly target?: string | undefined;
    readonly originalError?: Error | undefined;
    constructor(message: string, code: string, source?: string | undefined, target?: string | undefined, originalError?: Error | undefined);
}
type FileMoverEvent = {
    'copy:start': (source: string, target: string) => void;
    'copy:done': (source: string, target: string) => void;
    'clean:start': (path: string) => void;
    'clean:done': (path: string) => void;
    error: (error: FileMoverError) => void;
};
declare class FileMover extends EventEmitter {
    private readonly options;
    constructor(options?: MoveOptions);
    private _emit;
    /**
     * 复制文件或目录
     * @param source 源文件路径
     * @param target 目标路径
     * @param isDir 源路径是否为目录
     * @param subPath 附加路径(相对base的路径)
     */
    private copyFile;
    /**
     * 清理空目录
     * @param {string} dir - 清理目录
     * @param {string} baseDir - 基准目录
     */
    private cleanEmptyDir;
    /**
     * 清理文件或目录
     */
    private cleanFile;
    /**
     * 根据映射表移动文件或目录
     */
    move(pathMap: PathMapping): Promise<void>;
}
declare function createFileMover(options?: MoveOptions): FileMover;
declare function moveFile(pathMap: PathMapping, options?: MoveOptions): Promise<void>;

export { FileMoverError, type FileMoverEvent, type MoveOptions, type PathMapping, createFileMover, moveFile };
